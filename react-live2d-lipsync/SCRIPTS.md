# NPM Scripts Guide

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§åˆ©ç”¨å¯èƒ½ãªå…¨ã¦ã®NPMã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª¬æ˜ã§ã™ã€‚

## ğŸš€ Quick Start

Makefileã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼ˆæ¨å¥¨ï¼‰:

```bash
# ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
make help

# é–‹ç™ºé–‹å§‹
make install
make dev

# ãƒ“ãƒ«ãƒ‰
make build

# å…¬é–‹ï¼ˆãƒ‘ãƒƒãƒï¼‰
make publish-patch
```

NPMã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹å ´åˆ:

```bash
npm install
npm run dev
npm run build
npm run publish:patch
```

## ğŸ“¦ é–‹ç™ºç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### `npm run dev`
é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’ç›£è¦–ã—ã¦è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```bash
npm run dev
```

### `npm run build`
ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã«ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```bash
npm run build
```

### `npm run build:watch`
`npm run dev`ã¨åŒã˜ã€‚ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```bash
npm run build:watch
```

### `npm run clean`
ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ`dist/`ï¼‰ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

```bash
npm run clean
```

### `npm run rebuild`
ã‚¯ãƒªãƒ¼ãƒ³å¾Œã«å†ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```bash
npm run rebuild
```

### `npm run typecheck`
TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯ã®ã¿å®Ÿè¡Œï¼ˆãƒ“ãƒ«ãƒ‰ãªã—ï¼‰ã€‚

```bash
npm run typecheck
```

### `npm run validate`
å‹ãƒã‚§ãƒƒã‚¯ã¨ãƒ“ãƒ«ãƒ‰ã‚’ä¸¡æ–¹å®Ÿè¡Œã—ã¾ã™ã€‚å…¬é–‹å‰ã®æ¤œè¨¼ã«ä½¿ç”¨ã€‚

```bash
npm run validate
```

### `npm run test:build`
ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

```bash
npm run test:build
```

## ğŸš€ å…¬é–‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### `npm run publish:patch`
ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ1.0.0 â†’ 1.0.1ï¼‰ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦å…¬é–‹ã—ã¾ã™ã€‚

```bash
npm run publish:patch
```

**ä½¿ç”¨ä¾‹**: ãƒã‚°ä¿®æ­£ã€å°ã•ãªæ”¹å–„

### `npm run publish:minor`
ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ1.0.0 â†’ 1.1.0ï¼‰ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦å…¬é–‹ã—ã¾ã™ã€‚

```bash
npm run publish:minor
```

**ä½¿ç”¨ä¾‹**: æ–°æ©Ÿèƒ½è¿½åŠ ï¼ˆå¾Œæ–¹äº’æ›æ€§ã‚ã‚Šï¼‰

### `npm run publish:major`
ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ1.0.0 â†’ 2.0.0ï¼‰ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦å…¬é–‹ã—ã¾ã™ã€‚

```bash
npm run publish:major
```

**ä½¿ç”¨ä¾‹**: ç ´å£Šçš„å¤‰æ›´ã€APIã®å¤§å¹…å¤‰æ›´

### `npm run publish:beta`
ãƒ™ãƒ¼ã‚¿ç‰ˆã¨ã—ã¦å…¬é–‹ã—ã¾ã™ï¼ˆ1.0.0 â†’ 1.0.1-beta.0ï¼‰ã€‚

```bash
npm run publish:beta
```

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•**:
```bash
npm install react-live2d-lipsync@beta
```

### `npm run publish:dry`
å®Ÿéš›ã«å…¬é–‹ã›ãšã€å…¬é–‹å†…å®¹ã‚’ç¢ºèªã—ã¾ã™ï¼ˆãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼‰ã€‚

```bash
npm run publish:dry
```

## ğŸ”— ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### `npm run pack:local`
`.tgz`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã€‚

```bash
npm run pack:local
# ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«: react-live2d-lipsync-1.0.0.tgz
```

**ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
```bash
npm install /path/to/react-live2d-lipsync-1.0.0.tgz
```

### `npm run install:local`
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
npm run install:local
```

### `npm run uninstall:local`
ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

```bash
npm run uninstall:local
```

### `npm run link:local`
npm linkã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒªãƒ³ã‚¯ã—ã¾ã™ã€‚

```bash
npm run link:local
```

**ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒªãƒ³ã‚¯**:
```bash
cd /path/to/your-app
npm link react-live2d-lipsync
```

### `npm run unlink:local`
npm linkã‚’è§£é™¤ã—ã¾ã™ã€‚

```bash
npm run unlink:local
```

## ğŸ“Š æƒ…å ±ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### `npm run info`
å…¬é–‹ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

```bash
npm run info
```

## ğŸ™ GitHub ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

NPMã«å…¬é–‹ã›ãšã€GitHubã‹ã‚‰ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

### `npm run prepare:github`
distã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦Gitã«è¿½åŠ æº–å‚™ã—ã¾ã™ã€‚

```bash
npm run prepare:github
```

å®Ÿè¡Œå†…å®¹:
1. ãƒ“ãƒ«ãƒ‰
2. distã‚’git addã«è¿½åŠ 
3. git statusã§ç¢ºèª

### `npm run release:github`
ãƒ“ãƒ«ãƒ‰ã—ã¦distã‚’ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

```bash
npm run release:github
```

å®Ÿè¡Œå†…å®¹:
1. ãƒ“ãƒ«ãƒ‰
2. distã‚’git add
3. ã‚³ãƒŸãƒƒãƒˆï¼ˆ"Update build files"ï¼‰
4. ãƒ—ãƒƒã‚·ãƒ¥

### `npm run release:tag`
Gitã‚¿ã‚°ã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
npm run release:tag
# ä¾‹: git tag -a v1.0.0
```

### `npm run release:push`
ã‚³ãƒŸãƒƒãƒˆã¨ã‚¿ã‚°ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚

```bash
npm run release:push
```

## ğŸ”„ è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### `prepublishOnly`
`npm publish`å®Ÿè¡Œæ™‚ã«è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
- distãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¯ãƒªãƒ¼ãƒ³
- å†ãƒ“ãƒ«ãƒ‰

### `preversion`
ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°å‰ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
- å‹ãƒã‚§ãƒƒã‚¯
- ãƒ“ãƒ«ãƒ‰

### `postversion`
ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°å¾Œã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
- Gitã«ã‚³ãƒŸãƒƒãƒˆ
- ã‚¿ã‚°ã‚’ãƒ—ãƒƒã‚·ãƒ¥

## ğŸ’¡ å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

### åˆå›é–‹ç™ºã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰èµ·å‹•
npm run dev
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
npm run build

# ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ†ã‚¹ãƒˆï¼ˆæ–¹æ³•1: packï¼‰
npm run pack:local
# â†’ ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§: npm install /path/to/react-live2d-lipsync-1.0.0.tgz

# ã¾ãŸã¯ï¼ˆæ–¹æ³•2: linkï¼‰
npm run link:local
# â†’ ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§: npm link react-live2d-lipsync
```

### å…¬é–‹å‰ãƒã‚§ãƒƒã‚¯

```bash
# å‹ãƒã‚§ãƒƒã‚¯ + ãƒ“ãƒ«ãƒ‰
npm run validate

# å…¬é–‹å†…å®¹ç¢ºèªï¼ˆãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼‰
npm run publish:dry

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±ç¢ºèª
npm run info
```

### NPMã«å…¬é–‹ï¼ˆãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰

```bash
# ãƒã‚°ä¿®æ­£å¾Œã€ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å…¬é–‹
npm run publish:patch

# è‡ªå‹•çš„ã«ä»¥ä¸‹ãŒå®Ÿè¡Œã•ã‚Œã‚‹:
# 1. å‹ãƒã‚§ãƒƒã‚¯ + ãƒ“ãƒ«ãƒ‰ (preversion)
# 2. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·æ›´æ–° (1.0.0 â†’ 1.0.1)
# 3. ã‚¯ãƒªãƒ¼ãƒ³ + å†ãƒ“ãƒ«ãƒ‰ (prepublishOnly)
# 4. NPMã«å…¬é–‹
# 5. Gitã‚³ãƒŸãƒƒãƒˆ + ã‚¿ã‚°ãƒ—ãƒƒã‚·ãƒ¥ (postversion)
```

### ãƒ™ãƒ¼ã‚¿ç‰ˆå…¬é–‹

```bash
# ãƒ™ãƒ¼ã‚¿ç‰ˆã¨ã—ã¦å…¬é–‹
npm run publish:beta

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã“ã†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:
# npm install react-live2d-lipsync@beta
```

### æ–°æ©Ÿèƒ½è¿½åŠ å¾Œã®å…¬é–‹ï¼ˆãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰

```bash
npm run publish:minor
# 1.0.1 â†’ 1.1.0
```

### ç ´å£Šçš„å¤‰æ›´å¾Œã®å…¬é–‹ï¼ˆãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰

```bash
npm run publish:major
# 1.1.0 â†’ 2.0.0
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

```bash
# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
npm run rebuild

# å‹ãƒã‚§ãƒƒã‚¯
npm run typecheck
```

### å…¬é–‹å‰ã«å†…å®¹ã‚’ç¢ºèªã—ãŸã„

```bash
# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³
npm run publish:dry

# å…¬é–‹ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
npm run info
```

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆãŒã†ã¾ãã„ã‹ãªã„

```bash
# linkã‚’è§£é™¤ã—ã¦ã‚„ã‚Šç›´ã—
npm run unlink:local
npm run link:local

# ã¾ãŸã¯
npm run pack:local
# ç”Ÿæˆã•ã‚ŒãŸ.tgzãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```

## ğŸ“‹ ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸€è¦§ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼‰

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `npm run dev` | é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¦ã‚©ãƒƒãƒï¼‰ |
| `npm run build` | ãƒ“ãƒ«ãƒ‰ |
| `npm run clean` | distãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤ |
| `npm run rebuild` | ã‚¯ãƒªãƒ¼ãƒ³ + ãƒ“ãƒ«ãƒ‰ |
| `npm run typecheck` | å‹ãƒã‚§ãƒƒã‚¯ |
| `npm run validate` | å‹ãƒã‚§ãƒƒã‚¯ + ãƒ“ãƒ«ãƒ‰ |
| `npm run publish:patch` | ãƒ‘ãƒƒãƒå…¬é–‹ (1.0.0â†’1.0.1) |
| `npm run publish:minor` | ãƒã‚¤ãƒŠãƒ¼å…¬é–‹ (1.0.0â†’1.1.0) |
| `npm run publish:major` | ãƒ¡ã‚¸ãƒ£ãƒ¼å…¬é–‹ (1.0.0â†’2.0.0) |
| `npm run publish:beta` | ãƒ™ãƒ¼ã‚¿å…¬é–‹ |
| `npm run publish:dry` | å…¬é–‹ãƒ†ã‚¹ãƒˆï¼ˆå®Ÿè¡Œãªã—ï¼‰ |
| `npm run pack:local` | .tgzä½œæˆ |
| `npm run link:local` | ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒ³ã‚¯ |
| `npm run info` | å…¬é–‹ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ |

## ğŸ” åˆå›å…¬é–‹æ™‚ã®æº–å‚™

### 1. NPMã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

https://www.npmjs.com/ ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

### 2. ãƒ­ã‚°ã‚¤ãƒ³

```bash
npm login
```

### 3. package.json ã®æ›´æ–°

```json
{
  "name": "react-live2d-lipsync",  // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ã‚ã‚‹ã“ã¨ï¼‰
  "version": "1.0.0",
  "author": "Your Name <your.email@example.com>",
  "repository": {
    "type": "git",
    "url": "https://github.com/yourYuta-Hachino/motion-chara"
  }
}
```

### 4. å…¬é–‹

```bash
# åˆå›å…¬é–‹
npm run publish:patch

# ã‚¹ã‚³ãƒ¼ãƒ—ä»˜ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å ´åˆ
npm publish --access public
```

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **å…¬é–‹å‰ã¯å¿…ãš validate ã‚’å®Ÿè¡Œ**
   ```bash
   npm run validate
   ```

2. **ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ã§ç¢ºèª**
   ```bash
   npm run publish:dry
   ```

3. **ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’å®ˆã‚‹**
   - ãƒ‘ãƒƒãƒ: ãƒã‚°ä¿®æ­£
   - ãƒã‚¤ãƒŠãƒ¼: æ–°æ©Ÿèƒ½ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
   - ãƒ¡ã‚¸ãƒ£ãƒ¼: ç ´å£Šçš„å¤‰æ›´

4. **ãƒ™ãƒ¼ã‚¿ç‰ˆã§ãƒ†ã‚¹ãƒˆ**
   ```bash
   npm run publish:beta
   # ãƒ†ã‚¹ãƒˆå¾Œ
   npm run publish:minor
   ```

5. **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã‚’å¿˜ã‚Œãšã«**
   ```bash
   npm run link:local
   # ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ†ã‚¹ãƒˆ
   ```
