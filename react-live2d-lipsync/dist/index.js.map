{"version":3,"file":"index.js","sources":["../src/Live2DCharacter.tsx","../src/AudioAnalyzer.ts","../src/useLive2DAudio.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport * as PIXI from 'pixi.js';\nimport { Live2DCharacterProps } from './types';\n\n// Enable Live2D global mixins for PIXI\nif (typeof window !== 'undefined') {\n  (window as any).PIXI = PIXI;\n}\n\n// Dynamically import Live2D to avoid SSR issues\nlet Live2DModel: any = null;\nif (typeof window !== 'undefined') {\n  import('pixi-live2d-display').then((module) => {\n    Live2DModel = module.Live2DModel;\n  });\n}\n\nconst DefaultLoadingComponent = () => (\n  <div style={{\n    position: 'absolute',\n    inset: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(240, 240, 240, 0.75)',\n  }}>\n    <div style={{ textAlign: 'center' }}>\n      <div style={{\n        width: '48px',\n        height: '48px',\n        border: '4px solid #3b82f6',\n        borderTopColor: 'transparent',\n        borderRadius: '50%',\n        animation: 'spin 1s linear infinite',\n        margin: '0 auto 16px',\n      }} />\n      <p style={{ color: '#374151' }}>Loading Live2D model...</p>\n    </div>\n  </div>\n);\n\nconst DefaultErrorComponent = ({ error }: { error: string }) => (\n  <div style={{\n    position: 'absolute',\n    inset: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(254, 242, 242, 0.9)',\n  }}>\n    <div style={{ textAlign: 'center', padding: '24px' }}>\n      <p style={{ color: '#dc2626', fontWeight: 600, marginBottom: '8px' }}>エラー</p>\n      <p style={{ color: '#ef4444', fontSize: '14px' }}>{error}</p>\n    </div>\n  </div>\n);\n\n/**\n * Live2D Character Component\n *\n * A React component that displays a Live2D model with lip-sync and blinking animations.\n *\n * @example\n * ```tsx\n * import { Live2DCharacter } from 'react-live2d-lipsync';\n *\n * function App() {\n *   const [audioVolume, setAudioVolume] = useState(0);\n *\n *   return (\n *     <Live2DCharacter\n *       modelPath=\"/models/character.model3.json\"\n *       audioVolume={audioVolume}\n *       positionY={-0.3}\n *       scale={1.2}\n *     />\n *   );\n * }\n * ```\n */\nexport const Live2DCharacter: React.FC<Live2DCharacterProps> = ({\n  modelPath,\n  audioVolume = 0,\n  onModelLoaded,\n  onModelError,\n  positionY = 0,\n  positionX = 0,\n  scale = 1,\n  width = 640,\n  height = 960,\n  backgroundColor = 0xf0f0f0,\n  antialias = true,\n  className = '',\n  style = {},\n  enableBlinking = true,\n  blinkInterval = [2000, 6000],\n  blinkDuration = 100,\n  enableLipSync = true,\n  lipSyncSensitivity = 1.5,\n  showLoading = true,\n  showError = true,\n  loadingComponent,\n  errorComponent,\n  // Phase 1\n  expression,\n  expressions,\n  onExpressionChanged,\n  enableBreathing = true,\n  breathingSpeed = 1.0,\n  breathingIntensity = 0.5,\n  fps = 60,\n  resolution = 1,\n  autoQuality = false,\n  // Phase 2\n  enableMouseTracking = false,\n  trackingSmoothing = 0.1,\n  trackingRange = 30,\n  motionGroup,\n  motions,\n  onMotionFinished,\n  motionPriority = 2,\n  loopMotion = false,\n  // Phase 3\n  preloadExpressions = false,\n  preloadMotions = false,\n  onPreloadComplete,\n  onPreloadProgress,\n  ariaLabel,\n  ariaDescription,\n  enableKeyboardControls = false,\n  onKeyboardEvent,\n}) => {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const appRef = useRef<PIXI.Application | null>(null);\n  const modelRef = useRef<any>(null);\n  const blinkTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const breathingTimerRef = useRef<number | null>(null);\n  const mousePositionRef = useRef({ x: 0, y: 0 });\n  const currentAngleRef = useRef({ x: 0, y: 0 });\n  const performanceRef = useRef<{ frameCount: number; startTime: number }>({ frameCount: 0, startTime: 0 });\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initLive2D = async () => {\n      if (!canvasRef.current) return;\n\n      // Prevent multiple initializations\n      if (appRef.current) return;\n\n      // Wait for Live2DModel to be loaded\n      if (!Live2DModel) {\n        const checkModel = setInterval(() => {\n          if (Live2DModel) {\n            clearInterval(checkModel);\n            initLive2D();\n          }\n        }, 100);\n        return;\n      }\n\n      // Wait for Live2D SDK to be loaded\n      if (typeof window !== 'undefined' && (!(window as any).Live2DCubismCore && !(window as any).Live2D)) {\n        const checkSDK = setInterval(() => {\n          if ((window as any).Live2DCubismCore || (window as any).Live2D) {\n            clearInterval(checkSDK);\n            initLive2D();\n          }\n        }, 100);\n        return;\n      }\n\n      try {\n        // Clear any existing content\n        canvasRef.current.innerHTML = '';\n\n        // Create PIXI Application with performance settings\n        const app = new PIXI.Application({\n          width: width * resolution,\n          height: height * resolution,\n          backgroundColor,\n          antialias,\n          resolution,\n        });\n\n        appRef.current = app;\n        canvasRef.current.appendChild(app.view as HTMLCanvasElement);\n\n        // Configure FPS limit\n        if (fps && fps < 60) {\n          app.ticker.maxFPS = fps;\n        }\n\n        // Performance monitoring for auto quality\n        if (autoQuality) {\n          performanceRef.current.startTime = Date.now();\n          app.ticker.add(() => {\n            performanceRef.current.frameCount++;\n            const elapsed = Date.now() - performanceRef.current.startTime;\n\n            // Check performance every 2 seconds\n            if (elapsed >= 2000) {\n              const currentFPS = (performanceRef.current.frameCount / elapsed) * 1000;\n\n              // If FPS drops below target, reduce quality\n              if (currentFPS < fps * 0.8 && resolution > 0.5) {\n                console.warn(`Low FPS detected (${currentFPS.toFixed(1)}), reducing resolution`);\n                // Note: Actual resolution change would require recreating the app\n                // This is a simplified version - full implementation would need app recreation\n              }\n\n              performanceRef.current.frameCount = 0;\n              performanceRef.current.startTime = Date.now();\n            }\n          });\n        }\n\n        // Load Live2D model\n        const model = await Live2DModel.from(modelPath);\n        modelRef.current = model;\n\n        // Scale and position model - use width/height directly instead of app.screen\n        const screenWidth = app.screen?.width || width;\n        const screenHeight = app.screen?.height || height;\n\n        const scaleX = (screenWidth * 0.8) / model.width;\n        const scaleY = (screenHeight * 0.8) / model.height;\n        const baseScale = Math.min(scaleX, scaleY);\n\n        model.scale.set(baseScale * scale);\n        model.x = screenWidth / 2 + (positionX * screenWidth / 2);\n        model.y = screenHeight / 2 + (positionY * screenHeight / 2);\n        model.anchor.set(0.5, 0.5);\n\n        app.stage.addChild(model);\n\n        // Initialize parameters\n        if (model.internalModel && model.internalModel.coreModel) {\n          model.internalModel.coreModel.setParameterValueById('ParamMouthOpenY', 0);\n          model.internalModel.coreModel.setParameterValueById('ParamEyeLOpen', 1);\n          model.internalModel.coreModel.setParameterValueById('ParamEyeROpen', 1);\n        }\n\n        // Start blinking animation if enabled\n        if (enableBlinking) {\n          startBlinking();\n        }\n\n        // Start breathing animation if enabled\n        if (enableBreathing) {\n          startBreathing();\n        }\n\n        // Preload resources if enabled\n        if (preloadExpressions || preloadMotions) {\n          await preloadResources();\n        }\n\n        setIsLoading(false);\n        onModelLoaded?.();\n      } catch (err) {\n        const errorMessage = err instanceof Error ? err.message : String(err);\n        console.error('Failed to load Live2D model:', err);\n        setError(`モデル読み込みエラー: ${errorMessage}`);\n        setIsLoading(false);\n        onModelError?.(err instanceof Error ? err : new Error(errorMessage));\n      }\n    };\n\n    initLive2D();\n\n    return () => {\n      if (blinkTimerRef.current) {\n        clearTimeout(blinkTimerRef.current);\n        blinkTimerRef.current = null;\n      }\n      if (breathingTimerRef.current) {\n        cancelAnimationFrame(breathingTimerRef.current);\n        breathingTimerRef.current = null;\n      }\n      if (modelRef.current) {\n        modelRef.current.destroy();\n        modelRef.current = null;\n      }\n      if (appRef.current) {\n        appRef.current.destroy(true, { children: true, texture: true, baseTexture: true });\n        appRef.current = null;\n      }\n      if (canvasRef.current) {\n        canvasRef.current.innerHTML = '';\n      }\n    };\n  }, [modelPath, width, height, backgroundColor, antialias, enableBlinking, enableBreathing]);\n\n  // Blinking animation\n  const startBlinking = () => {\n    const blink = () => {\n      if (!modelRef.current?.internalModel?.coreModel) return;\n\n      const coreModel = modelRef.current.internalModel.coreModel;\n\n      // Close eyes\n      coreModel.setParameterValueById('ParamEyeLOpen', 0);\n      coreModel.setParameterValueById('ParamEyeROpen', 0);\n\n      // Open eyes after specified duration\n      setTimeout(() => {\n        if (coreModel) {\n          coreModel.setParameterValueById('ParamEyeLOpen', 1);\n          coreModel.setParameterValueById('ParamEyeROpen', 1);\n        }\n      }, blinkDuration);\n\n      // Schedule next blink with random interval\n      const [minInterval, maxInterval] = blinkInterval;\n      const nextInterval = minInterval + Math.random() * (maxInterval - minInterval);\n      blinkTimerRef.current = setTimeout(blink, nextInterval);\n    };\n\n    blink();\n  };\n\n  // Breathing animation\n  const startBreathing = () => {\n    let breathPhase = 0;\n\n    const updateBreathing = () => {\n      if (!modelRef.current?.internalModel?.coreModel || !enableBreathing) return;\n\n      const coreModel = modelRef.current.internalModel.coreModel;\n      breathPhase += 0.016 * breathingSpeed; // Assuming ~60fps\n\n      const breathValue = Math.sin(breathPhase) * breathingIntensity;\n\n      // Try to set ParamBreath if available, otherwise use body angle\n      try {\n        coreModel.setParameterValueById('ParamBreath', breathValue);\n      } catch {\n        // Fallback: use body angle for breathing effect\n        try {\n          coreModel.setParameterValueById('ParamBodyAngleY', breathValue * 2);\n        } catch {\n          // Model doesn't support breathing parameters\n        }\n      }\n\n      breathingTimerRef.current = requestAnimationFrame(updateBreathing);\n    };\n\n    updateBreathing();\n  };\n\n  // Preload resources\n  const preloadResources = async () => {\n    const resources: string[] = [];\n\n    if (preloadExpressions && expressions) {\n      resources.push(...Object.values(expressions));\n    }\n\n    if (preloadMotions && motions) {\n      resources.push(...Object.values(motions));\n    }\n\n    if (resources.length === 0) return;\n\n    let loaded = 0;\n    const total = resources.length;\n\n    for (const resourcePath of resources) {\n      try {\n        await fetch(resourcePath);\n        loaded++;\n        onPreloadProgress?.(loaded / total);\n      } catch (err) {\n        console.warn(`Failed to preload resource: ${resourcePath}`, err);\n      }\n    }\n\n    onPreloadComplete?.();\n  };\n\n  // Update mouth based on audio volume (lip-sync)\n  useEffect(() => {\n    if (!modelRef.current?.internalModel?.coreModel || !enableLipSync) return;\n\n    const smoothVolume = Math.min(audioVolume * lipSyncSensitivity, 1);\n    modelRef.current.internalModel.coreModel.setParameterValueById(\n      'ParamMouthOpenY',\n      smoothVolume\n    );\n  }, [audioVolume, enableLipSync, lipSyncSensitivity]);\n\n  // Update model position and scale when props change\n  useEffect(() => {\n    if (!modelRef.current || !appRef.current) return;\n\n    const app = appRef.current;\n    const model = modelRef.current;\n\n    // Recalculate scale - use width/height directly instead of app.screen\n    const screenWidth = app.screen?.width || width;\n    const screenHeight = app.screen?.height || height;\n\n    const scaleX = (screenWidth * 0.8) / model.width;\n    const scaleY = (screenHeight * 0.8) / model.height;\n    const baseScale = Math.min(scaleX, scaleY);\n\n    model.scale.set(baseScale * scale);\n    model.x = screenWidth / 2 + (positionX * screenWidth / 2);\n    model.y = screenHeight / 2 + (positionY * screenHeight / 2);\n  }, [positionY, positionX, scale, width, height]);\n\n  // Expression change handler\n  useEffect(() => {\n    if (!modelRef.current || !expression || !expressions) return;\n\n    const loadExpression = async () => {\n      try {\n        const expressionPath = expressions[expression];\n        if (!expressionPath) {\n          console.warn(`Expression \"${expression}\" not found in expressions map`);\n          return;\n        }\n\n        // Load expression using Live2D API\n        const model = modelRef.current;\n        if (model.internalModel && model.internalModel.motionManager) {\n          const response = await fetch(expressionPath);\n          const expressionData = await response.json();\n\n          // Apply expression parameters\n          if (expressionData.Parameters) {\n            expressionData.Parameters.forEach((param: any) => {\n              try {\n                model.internalModel.coreModel.setParameterValueById(\n                  param.Id,\n                  param.Value\n                );\n              } catch (err) {\n                console.warn(`Failed to set parameter ${param.Id}:`, err);\n              }\n            });\n          }\n\n          onExpressionChanged?.(expression);\n        }\n      } catch (err) {\n        console.error(`Failed to load expression \"${expression}\":`, err);\n      }\n    };\n\n    loadExpression();\n  }, [expression, expressions, onExpressionChanged]);\n\n  // Mouse tracking handler\n  useEffect(() => {\n    if (!enableMouseTracking || !canvasRef.current || !modelRef.current) return;\n\n    const handleMouseMove = (event: MouseEvent) => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n\n      const rect = canvas.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n\n      // Convert to normalized coordinates (-1 to 1)\n      mousePositionRef.current = {\n        x: ((x / rect.width) * 2 - 1),\n        y: ((y / rect.height) * 2 - 1),\n      };\n    };\n\n    const updateTracking = () => {\n      if (!modelRef.current?.internalModel?.coreModel) return;\n\n      const coreModel = modelRef.current.internalModel.coreModel;\n      const mouseX = mousePositionRef.current.x;\n      const mouseY = mousePositionRef.current.y;\n\n      // Calculate target angles\n      const targetAngleX = mouseX * trackingRange;\n      const targetAngleY = -mouseY * trackingRange;\n\n      // Smooth interpolation\n      currentAngleRef.current.x += (targetAngleX - currentAngleRef.current.x) * trackingSmoothing;\n      currentAngleRef.current.y += (targetAngleY - currentAngleRef.current.y) * trackingSmoothing;\n\n      // Apply to model parameters\n      try {\n        coreModel.setParameterValueById('ParamAngleX', currentAngleRef.current.x);\n        coreModel.setParameterValueById('ParamAngleY', currentAngleRef.current.y);\n        coreModel.setParameterValueById('ParamBodyAngleX', currentAngleRef.current.x * 0.5);\n        coreModel.setParameterValueById('ParamEyeBallX', currentAngleRef.current.x * 0.8);\n        coreModel.setParameterValueById('ParamEyeBallY', currentAngleRef.current.y * 0.8);\n      } catch (err) {\n        // Some parameters might not exist in all models\n      }\n\n      requestAnimationFrame(updateTracking);\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    const trackingId = requestAnimationFrame(updateTracking);\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      cancelAnimationFrame(trackingId);\n    };\n  }, [enableMouseTracking, trackingSmoothing, trackingRange]);\n\n  // Motion management handler\n  useEffect(() => {\n    if (!modelRef.current || !motionGroup || !motions) return;\n\n    const playMotion = async () => {\n      try {\n        const motionPath = motions[motionGroup];\n        if (!motionPath) {\n          console.warn(`Motion \"${motionGroup}\" not found in motions map`);\n          return;\n        }\n\n        const model = modelRef.current;\n        if (!model.internalModel?.motionManager) {\n          console.warn('Motion manager not available');\n          return;\n        }\n\n        // Use pixi-live2d-display motion API\n        const motion = await model.internalModel.motionManager.loadMotion(\n          motionGroup,\n          0,\n          motionPath\n        );\n\n        if (motion) {\n          // Set motion priority and loop\n          model.internalModel.motionManager.startMotion(\n            motion,\n            loopMotion,\n            motionPriority\n          );\n\n          // Handle motion finish\n          if (!loopMotion) {\n            motion.onFinish = () => {\n              onMotionFinished?.(motionGroup);\n            };\n          }\n        }\n      } catch (err) {\n        console.error(`Failed to play motion \"${motionGroup}\":`, err);\n      }\n    };\n\n    playMotion();\n  }, [motionGroup, motions, motionPriority, loopMotion, onMotionFinished]);\n\n  // Keyboard controls handler\n  useEffect(() => {\n    if (!enableKeyboardControls) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // Notify parent component\n      onKeyboardEvent?.(event);\n\n      // Default keyboard controls (can be overridden)\n      if (!onKeyboardEvent) {\n        switch (event.key) {\n          case 'ArrowLeft':\n            // Move left (example)\n            break;\n          case 'ArrowRight':\n            // Move right (example)\n            break;\n          case ' ':\n            // Space bar - trigger action (example)\n            event.preventDefault();\n            break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [enableKeyboardControls, onKeyboardEvent]);\n\n  return (\n    <div\n      className={className}\n      style={{ position: 'relative', ...style }}\n      role=\"img\"\n      aria-label={ariaLabel || 'Live2D character'}\n      aria-description={ariaDescription}\n      tabIndex={enableKeyboardControls ? 0 : undefined}\n    >\n      <div ref={canvasRef} />\n\n      {isLoading && showLoading && (\n        loadingComponent || <DefaultLoadingComponent />\n      )}\n\n      {error && showError && (\n        errorComponent || <DefaultErrorComponent error={error} />\n      )}\n    </div>\n  );\n};\n","import { AudioAnalyzerOptions } from './types';\n\nexport class AudioAnalyzer {\n  private audioContext: AudioContext | null = null;\n  private analyser: AnalyserNode | null = null;\n  private dataArray: Uint8Array<ArrayBuffer> | null = null;\n  private source: MediaElementAudioSourceNode | null = null;\n  private options: Required<AudioAnalyzerOptions>;\n\n  constructor(options: AudioAnalyzerOptions = {}) {\n    this.options = {\n      fftSize: options.fftSize ?? 256,\n      smoothingTimeConstant: options.smoothingTimeConstant ?? 0.8,\n    };\n  }\n\n  initialize(audioElement: HTMLAudioElement): void {\n    if (this.audioContext) {\n      return; // Already initialized\n    }\n\n    this.audioContext = new AudioContext();\n    this.analyser = this.audioContext.createAnalyser();\n    this.analyser.fftSize = this.options.fftSize;\n    this.analyser.smoothingTimeConstant = this.options.smoothingTimeConstant;\n\n    const bufferLength = this.analyser.frequencyBinCount;\n    this.dataArray = new Uint8Array(bufferLength);\n\n    this.source = this.audioContext.createMediaElementSource(audioElement);\n    this.source.connect(this.analyser);\n    this.analyser.connect(this.audioContext.destination);\n  }\n\n  getVolume(): number {\n    if (!this.analyser || !this.dataArray) return 0;\n\n    this.analyser.getByteFrequencyData(this.dataArray);\n\n    // Calculate average volume with emphasis on lower frequencies (speech range)\n    let sum = 0;\n    const speechRange = Math.floor(this.dataArray.length * 0.3); // Focus on lower 30%\n\n    for (let i = 0; i < speechRange; i++) {\n      sum += this.dataArray[i];\n    }\n    const average = sum / speechRange;\n\n    // Normalize to 0-1 range\n    return average / 255;\n  }\n\n  cleanup(): void {\n    if (this.source) {\n      this.source.disconnect();\n      this.source = null;\n    }\n    if (this.analyser) {\n      this.analyser.disconnect();\n      this.analyser = null;\n    }\n    if (this.audioContext) {\n      this.audioContext.close();\n      this.audioContext = null;\n    }\n    this.dataArray = null;\n  }\n\n  isInitialized(): boolean {\n    return this.audioContext !== null;\n  }\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { AudioAnalyzer } from './AudioAnalyzer';\nimport { UseLive2DAudioOptions } from './types';\n\n/**\n * Custom hook for managing Live2D audio analysis\n */\nexport function useLive2DAudio(options: UseLive2DAudioOptions = {}) {\n  const {\n    audioElement,\n    enabled = true,\n    analyzerOptions,\n    onPlay,\n    onPause,\n    onEnded,\n  } = options;\n\n  const [audioVolume, setAudioVolume] = useState(0);\n  const analyzerRef = useRef<AudioAnalyzer | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  useEffect(() => {\n    if (!audioElement || !enabled) return;\n\n    const handlePlay = () => {\n      if (!analyzerRef.current) {\n        analyzerRef.current = new AudioAnalyzer(analyzerOptions);\n        analyzerRef.current.initialize(audioElement);\n      }\n\n      const updateVolume = () => {\n        if (analyzerRef.current && !audioElement.paused) {\n          const volume = analyzerRef.current.getVolume();\n          setAudioVolume(volume);\n          animationFrameRef.current = requestAnimationFrame(updateVolume);\n        }\n      };\n\n      updateVolume();\n      onPlay?.();\n    };\n\n    const handlePause = () => {\n      setAudioVolume(0);\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n      onPause?.();\n    };\n\n    const handleEnded = () => {\n      setAudioVolume(0);\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n      onEnded?.();\n    };\n\n    audioElement.addEventListener('play', handlePlay);\n    audioElement.addEventListener('pause', handlePause);\n    audioElement.addEventListener('ended', handleEnded);\n\n    return () => {\n      audioElement.removeEventListener('play', handlePlay);\n      audioElement.removeEventListener('pause', handlePause);\n      audioElement.removeEventListener('ended', handleEnded);\n\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      if (analyzerRef.current) {\n        analyzerRef.current.cleanup();\n        analyzerRef.current = null;\n      }\n    };\n  }, [audioElement, enabled, analyzerOptions, onPlay, onPause, onEnded]);\n\n  return { audioVolume };\n}\n"],"names":["PIXI","useRef","useState","useEffect"],"mappings":"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"}